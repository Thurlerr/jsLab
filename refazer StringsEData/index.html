<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div>
        <p>Escreva uma frase</p>
        <label for="caixa">Entrada:<br></label>
        <textarea type="text" id="caixa" style="width:300px;"></textarea>
        <button type="button" id="invBtn">Inverter Caracteres</button>
        <button type="button" id="vogBtn">Marcar Vogais</button>
        <button type="button" id="contadorBtn">Contador de Palavras</button>
        <button type="button" id="ocorrenciaBtn">Maior Ocorrência</button>
    </div>
    <div>
        <label for="searchBox"></label>
        <input type="text" id="searchBox">
        <button type="button" id="searchBtn">Procurar</button>
    </div>
    <div>
        <label for="replaceBox"></label>
        <input type="text" id="replaceBox">
        <button type="button" id="replaceBtn">Substituir</button>
    </div>

    <script>
        //Q1
        let invBtn = document.getElementById("invBtn")

        invBtn.addEventListener("click", () => {
            const fraseInputada = document.getElementById("caixa")
            const fraseE = fraseInputada.value
            inverteFrase(fraseE)
        })

        function inverteFrase (frase){
        
        let arraySplitado = frase.split("")
        arraySplitado.reverse()
        fraseFinal = arraySplitado.join("")
        let retornoTela = document.createElement("p") //cria na memória um p
        retornoTela.textContent = fraseFinal //enfia conteúdo no p
        let corpo = document.querySelector("body") //seleciona um local no DOM
        corpo.appendChild(retornoTela) //insere o p criado no DOM no local selecionado
        return fraseFinal
        }

        //Q2
        const vogBtn = document.getElementById('vogBtn')
        
        //esse cara 
        vogBtn.addEventListener('click', () => { 
            const marcaVogal = document.getElementById("caixa").value
            marcaVogal.split("") //refatorar aqui para mudar de string para array
            console.log([...marcaVogal])
            //o retorno do método .map vai ser o valor de resultado
            const resultado = [...marcaVogal].map(letra => { //tirar a gambiarra do spread na refatoração
                if ("aeiouAEIOU".includes(letra)){
                    return `<b>${letra}</b>` //dentro da backtick ja cospe a tag pra por o codigo em negrito
                }
            return letra //esse return modifica resultado?
            }).join("")
        
            let retornoTelaQ2 = document.createElement("p") //cria p na memoria
            retornoTelaQ2.innerHTML = resultado //e agora viado? 
            console.log(`debug: ${resultado}`)
            let corpo = document.querySelector("body") //seleciona um local no DOM
            corpo.appendChild(retornoTelaQ2) //insere o p criado no DOM no local selecionado
        })

        //Q3
        contadorBtn = document.querySelector("#contadorBtn")
        
        contadorBtn.addEventListener('click', () => {
        let contadorPalavras = {} //objeto que vai cuspir o resultado
        let input = document.querySelector('#caixa')
        input = input.value.split(" ")

            //popula o objeto
            input.forEach(palavra => {
            
            if(contadorPalavras.hasOwnProperty(palavra)){
                contadorPalavras[palavra]++
            }else{
                contadorPalavras[palavra] = 1
            }
            })

            let retornoTela = document.createElement("p") //cria na memória um p
            retornoTela.textContent = JSON.stringify(contadorPalavras) //enfia conteúdo no p
            const corpo = document.querySelector("body") //seleciona um local no DOM
            corpo.appendChild(retornoTela) //insere o p criado no DOM no local selecionado


             //TABELA *********************************

            //cria tabela
            const tabela = document.createElement('table') //cria na memória um table
            tabela.border = "1"
            tabela.style.borderCollapse = "collapse"
            tabela.style.width = "50%"

            //cabeçalho tabela
            const header = document.createElement('tr')
            const colunaChave = document.createElement('th')
            colunaChave.textContent = "Chave"
            const colunaValor = document.createElement('th')
            colunaValor.textContent = "Valor"

            //adicionar colunas
            header.appendChild(colunaChave)
            header.appendChild(colunaValor)

            //adiciona cabeçalho a tabela
            tabela.appendChild(header)

            //itera sobre o objeto e cria uma linha pra cad achave e valor
            for (let chave in contadorPalavras) {
                const linha = document.createElement('tr'); // Cria uma linha
                // Cria a célula da chave
                const celulaChave = document.createElement('td');
                celulaChave.textContent = chave;

                // Cria a célula do valor
                 const celulaValor = document.createElement('td');
                 celulaValor.textContent = contadorPalavras[chave];

                 // Adiciona as células à linha
                 linha.appendChild(celulaChave);
                 linha.appendChild(celulaValor);

                 // Adiciona a linha à tabela
                 tabela.appendChild(linha);
            }
        
            // Insere a tabela no body
            corpo.appendChild(tabela);

            // FIM TABELA *********************************
        })
    //Q4

       let ocorrenciaBtn = document.querySelector("#ocorrenciaBtn") //criar esse botao lá no html
    
       ocorrenciaBtn.addEventListener('click', () => {
        let contadorPalavras = {} //objeto que vai cuspir o resultado
        let input = document.querySelector('#caixa')
        input = input.value.split(" ")

            //popula o objeto
            input.forEach(palavra => {
            
            if(contadorPalavras.hasOwnProperty(palavra)){
                contadorPalavras[palavra]++
            }else{
                contadorPalavras[palavra] = 1
            }
            })

            //iterar de novo pra verificar cada valor e ver qual é maior
            let chave = " "
            let auxMax = 0
            for(objKey in contadorPalavras){
                if(contadorPalavras[objKey] > auxMax) {
                    //identifica o maior valor e atribui a uma variável auxiliar
                    auxMax = contadorPalavras[objKey] //tenho q converter a string pra number?
                    //armazena essa chave
                    chave = objKey
                }
            }
            chave = (`Palavra de maior incidência: ${chave}, que apareceu ${auxMax} vezes`)
        const retornoTela = document.createElement("p") //cria na memória um p
        retornoTela.textContent = chave //enfia conteúdo no p
        const corpo = document.querySelector("body") //seleciona um local no DOM
        corpo.appendChild(retornoTela) //insere o p criado no DOM no local selecionado
        })

        //Q5 5. Faça um programa que implemente a funcionalidade substituir em textos, ou seja, terá um campo 
        //"procurar" e um campo "substituir". Ao executar, seu programa deverá procurar as ocorrências no texto 
        //do valor digitado em "procurar" e trocar pelo valor digitado em "substituir".

        //procurar
        const searchBtn = document.querySelector('#searchBtn')

        searchBtn.addEventListener('click', () => {

        let textoPrincipal = document.querySelector('#caixa').value
        let procurarNoTexto = document.querySelector('#searchBox').value

        textoPrincipal = textoPrincipal.split(" ")
        const textoPrincipal2 = textoPrincipal.map(palavra, () => {
        if(palavra == procurarNoTexto) return `<span style="background-color: yellow">${palavra}</span>`
        }).join(",")
        })

        //substituir
        const replaceBtn = document.querySelector('#replaceBtn')        
    
        replaceBtn.addEventListener('click', () => {
        //manipular a DOM pra enfiar o novo conteudo de textoPrincipal via innerhtml
        const retornoTela = document.createElement('p') //cria p na memoria
        const corpo = document.querySelector('body') //seleciona um lugar no DOM
        retornoTela = textoPrincipal.innerHTML //coloca conteudo no p
        retornoTela.appendChild(corpo)
        })

    </script>
</body>
</html>



<!-- 
1. Faça um programa que leia uma frase e escreva abaixo invertendo os caracteres - o primeiro se torna o 
último, o segundo o penúltimo e assim por diante.
2. Faça um programa que leia uma frase e escreva abaixo marcando as vogais em negrito.
3. Faça um programa que leia um texto e separe todas as palavras em um array, indicado para cada uma 
delas o número de vezes que aparece no texto. Imprima o array em uma tabela contendo a palavra e 
número de ocorrências.
4. Faça um programa que leia um texto e indique a palavra de maior ocorrência e quantas vezes ela 
apareceu no texto.
5. Faça um programa que implemente a funcionalidade substituir em textos, ou seja, terá um campo 
"procurar" e um campo "substituir". Ao executar, seu programa deverá procurar as ocorrências no texto 
do valor digitado em "procurar" e trocar pelo valor digitado em "substituir".
6. Faça um programa que leia uma data de nascimento e retorne quantos dias de vida a pessoa tem.
7. Faça um programa que leia uma data de nascimento em formato de dd/mm/aaaa e escreva por extenso a 
data. Por exemplo: 03/05/2017 vira "03 de maio de 2017".
8. Faça um programa que leia duas datas e indique em semanas a distância entre elas. Por exemplo: 
02/05/2017 e 02/07/2017 resultado = 8 semanas.
9. Faça uma caixa de texto que classifique:
- fraca (em vermelho) se só possuir letras minúsculas ou maiúsculas
- moderada (em laranja) se possuir letras minúsculas e maiúsculas e números
- forte (em verde) se possuir letras minúsculas e maiúsculas, números e caracteres especiais (@, #, !, 
$, %, &, *, (, ), -, +, ., =)
10. Faça um programa que codifique uma frase usando a estratégia TENIS/POLAR, na qual as letras que 
apareçam em uma das palavras são intercambiadas - A letra T por P e vice-versa; a letra E por O e vice versa; a letra N por L e vice-versa; a letra I por A e vice-versa; e a letra S por R e vice-versa; as demais 
letras devem ser mantidas no texto codificado -->